!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";
/*!
   * calendarizer v1.0.1
   * (c) 2025 David Garay
   * Released under the MIT License
   */class t extends HTMLElement{constructor(){super(),this.__opened=null,this.__button=null,this.google=null,this.outlook=null,this.yahoo=null,this.ics=null,this.__currentBlobUrl=null}static get observedAttributes(){return["button","title","date-start","date-end","timezone","location","organizer","content","theme","theme-url"]}getAttr(t,e=""){return this.getAttribute(t)||e}get button(){return this.getAttr("button","Add to Calendar")}get title(){return this.getAttr("title")}get dateStart(){return this.getAttr("date-start")}get dateEnd(){return this.getAttr("date-end")}get timezone(){return this.getAttr("timezone")}get location(){return this.getAttr("location")}get organizer(){return this.getAttr("organizer")}get content(){return this.getAttr("content")}get theme(){return this.getAttr("theme","light")}get themeUrl(){return this.getAttr("theme-url")}setAttr(t,e){null!=e&&this.setAttribute(t,e)}set button(t){this.setAttr("button",t)}set title(t){this.setAttr("title",t)}set dateStart(t){this.setAttr("date-start",t)}set dateEnd(t){this.setAttr("date-end",t)}set timezone(t){this.setAttr("timezone",t)}set location(t){this.setAttr("location",t)}set organizer(t){this.setAttr("organizer",t)}set content(t){this.setAttr("content",t)}set theme(t){this.setAttr("theme",t)}set themeUrl(t){this.setAttr("theme-url",t)}isValidDate(t){return!isNaN(new Date(t).getTime())}parseDate(t){const e=new Date(t);return{d:String(e.getDate()).padStart(2,"0"),m:String(e.getMonth()+1).padStart(2,"0"),y:e.getFullYear(),h:String(e.getHours()).padStart(2,"0"),n:String(e.getMinutes()).padStart(2,"0")}}googleDateFormat(t){return this.isValidDate(t)?new Date(t).toISOString().replace(/[-:]/g,"").split(".")[0]+"Z":""}outlookDateFormat(t){const e=this.parseDate(t);return`${e.y}-${e.m}-${e.d}T${e.h}:${e.n}:00`}escapeICS(t){return(t||"").replace(/[\\,;]/g,"\\$&").replace(/\n/g,"\\n")}isValidTimezone(t){try{return new Intl.DateTimeFormat("en",{timeZone:t}),!0}catch{return!1}}localDateFormat(t){return this.isValidDate(t)?new Date(t).toISOString().replace(/[-:]/g,"").replace(/\.\d{3}Z$/,""):""}lbr(t){return encodeURIComponent((t||"").replace(/<br\s*\/?>(\r\n|\n)?/gi,"\n\n"))}genGoogleLink(){return`https://calendar.google.com/calendar/u/0/r/eventedit?text=${encodeURIComponent(this.title)}&dates=${this.googleDateFormat(this.dateStart)}/${this.googleDateFormat(this.dateEnd)}&ctz=${encodeURIComponent(this.timezone)}&details=${this.lbr(this.content)}&location=${encodeURIComponent(this.location)}&pli=1`}genOutlookLink(){return`https://outlook.live.com/calendar/0/deeplink/compose?rru=addevent&path=%2Fcalendar%2Faction%2Fcompose&startdt=${this.outlookDateFormat(this.dateStart)}&enddt=${this.outlookDateFormat(this.dateEnd)}&subject=${encodeURIComponent(this.title)}&body=${this.lbr(this.content)}&location=${encodeURIComponent(this.location)}&allday=false`}genYahooLink(){return`https://calendar.yahoo.com/?v=60&title=${encodeURIComponent(this.title)}&desc=${this.lbr(this.content)}&in_loc=${encodeURIComponent(this.location)}&st=${this.googleDateFormat(this.dateStart)}&et=${this.googleDateFormat(this.dateEnd)}`}genICSContent(){const t=this.isValidTimezone(this.timezone),e=(this.content||"").replace(/<br\s*\/?>(\r\n|\n)?/gi,"\\n"),o=t?this.localDateFormat(this.dateStart):this.googleDateFormat(this.dateStart),n=t?this.localDateFormat(this.dateEnd):this.googleDateFormat(this.dateEnd);return["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Calendarizer//ES","BEGIN:VEVENT",`UID:${Date.now()}@calendarizer`,`DTSTAMP:${(new Date).toISOString().replace(/[-:]/g,"").split(".")[0]}Z`,`SUMMARY:${this.escapeICS(this.title)}`,`DESCRIPTION:${this.escapeICS(e)}`,`LOCATION:${this.escapeICS(this.location)}`,t?`DTSTART;TZID=${this.timezone}:${o}`:`DTSTART:${o}`,t?`DTEND;TZID=${this.timezone}:${n}`:`DTEND:${n}`,...this.organizer?[`ORGANIZER:${this.escapeICS(this.organizer)}`]:[],"STATUS:CONFIRMED","END:VEVENT","END:VCALENDAR"].join("\r\n")}genICSBlobLink(){this.__currentBlobUrl&&URL.revokeObjectURL(this.__currentBlobUrl);const t=new Blob([this.genICSContent()],{type:"text/calendar;charset=utf-8"});return this.__currentBlobUrl=URL.createObjectURL(t),this.__currentBlobUrl}updateCalendarLinks(){if(this.google&&(this.google.querySelector("a").href=this.genGoogleLink()),this.outlook&&(this.outlook.querySelector("a").href=this.genOutlookLink()),this.yahoo&&(this.yahoo.querySelector("a").href=this.genYahooLink()),this.ics){const t=this.ics.querySelector("a");t.href.startsWith("blob:")&&URL.revokeObjectURL(t.href),t.href=this.genICSBlobLink()}}connectedCallback(){this.attachShadow({mode:"open"});const t=this.getAttribute("theme")?.trim(),e=this.hasAttribute("theme");let o=!1;try{const n={light:".btn-cal-dropdown{align-items:center;border-radius:6px;cursor:pointer;display:inline-flex;font-family:Poppins,Helvetica,sans-serif;font-size:14px;font-weight:600;margin:2px;padding:10px 16px;position:relative;transition:background .3s ease,transform .2s ease}.btn-cal-dropdown:active{transform:scale(.98)}.btn-arrow{border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #f5f5f5;height:0;margin-left:10px;transition:transform .3s ease;width:0}.btn-cal-dropdown[aria-expanded=true] .btn-arrow{transform:rotate(180deg)}.dropdown-cal-menu{border-radius:8px;display:block;list-style:none;min-width:200px;opacity:0;padding:5px 0;pointer-events:none;position:absolute;transform:scale(.95) translateY(-10px);transform-origin:top;transition:all .25s ease;z-index:1000}.dropdown-cal-menu.show{opacity:1;pointer-events:auto;transform:scale(1) translateY(0)}.dropdown-cal-menu li{font-family:Arial,sans-serif;font-size:13px;margin:0;padding:0;transition:background-color .15s ease}.dropdown-cal-menu a{display:block;padding:10px 16px;text-decoration:none;transition:background-color .15s ease,color .2s ease}.dropdown-cal-menu li:first-child{border-radius:8px 8px 0 0}.dropdown-cal-menu li:last-child{border-radius:0 0 8px 8px}.btn-cal-dropdown{background:#fff;border:1px solid #6e6cfb;color:#111}.btn-cal-dropdown:hover{background:#6e6cfb;color:#fff}.btn-arrow{border-top:6px solid #111}.dropdown-cal-menu{background-color:#fff;border:1px solid #ccc;box-shadow:0 12px 24px rgba(0,0,0,.15)}.dropdown-cal-menu a{color:#1a1a1a}.dropdown-cal-menu li:hover{background-color:#f0f8ff}",dark:".btn-cal-dropdown{align-items:center;border-radius:6px;cursor:pointer;display:inline-flex;font-family:Poppins,Helvetica,sans-serif;font-size:14px;font-weight:600;margin:2px;padding:10px 16px;position:relative;transition:background .3s ease,transform .2s ease}.btn-cal-dropdown:active{transform:scale(.98)}.btn-arrow{border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #f5f5f5;height:0;margin-left:10px;transition:transform .3s ease;width:0}.btn-cal-dropdown[aria-expanded=true] .btn-arrow{transform:rotate(180deg)}.dropdown-cal-menu{border-radius:8px;display:block;list-style:none;min-width:200px;opacity:0;padding:5px 0;pointer-events:none;position:absolute;transform:scale(.95) translateY(-10px);transform-origin:top;transition:all .25s ease;z-index:1000}.dropdown-cal-menu.show{opacity:1;pointer-events:auto;transform:scale(1) translateY(0)}.dropdown-cal-menu li{font-family:Arial,sans-serif;font-size:13px;margin:0;padding:0;transition:background-color .15s ease}.dropdown-cal-menu a{display:block;padding:10px 16px;text-decoration:none;transition:background-color .15s ease,color .2s ease}.dropdown-cal-menu li:first-child{border-radius:8px 8px 0 0}.dropdown-cal-menu li:last-child{border-radius:0 0 8px 8px}.btn-cal-dropdown{background:#1c1c1f;border:1px solid #6e6cfb;color:#f5f5f5}.btn-cal-dropdown:hover{background:#6e6cfb;color:#fff}.dropdown-cal-menu{background-color:#1c1c1f;border:1px solid #2e2e32;box-shadow:0 12px 24px rgba(0,0,0,.5)}.dropdown-cal-menu a{color:#c3c7ff}.dropdown-cal-menu li:hover{background-color:#2c2e36}",warm:".btn-cal-dropdown{align-items:center;border-radius:6px;cursor:pointer;display:inline-flex;font-family:Poppins,Helvetica,sans-serif;font-size:14px;font-weight:600;margin:2px;padding:10px 16px;position:relative;transition:background .3s ease,transform .2s ease}.btn-cal-dropdown:active{transform:scale(.98)}.btn-arrow{border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #f5f5f5;height:0;margin-left:10px;transition:transform .3s ease;width:0}.btn-cal-dropdown[aria-expanded=true] .btn-arrow{transform:rotate(180deg)}.dropdown-cal-menu{border-radius:8px;display:block;list-style:none;min-width:200px;opacity:0;padding:5px 0;pointer-events:none;position:absolute;transform:scale(.95) translateY(-10px);transform-origin:top;transition:all .25s ease;z-index:1000}.dropdown-cal-menu.show{opacity:1;pointer-events:auto;transform:scale(1) translateY(0)}.dropdown-cal-menu li{font-family:Arial,sans-serif;font-size:13px;padding:0;transition:background-color .15s ease}.dropdown-cal-menu a{padding:10px 16px;transition:background-color .15s ease,color .2s ease}.dropdown-cal-menu li:first-child{border-radius:8px 8px 0 0}.dropdown-cal-menu li:last-child{border-radius:0 0 8px 8px}.btn-cal-dropdown{background-color:#f3b27a;border:none;color:#fff}.btn-cal-dropdown:hover{background-color:#e29e5d;color:#fff}.dropdown-cal-menu{background-color:#fffaf5;border:1px solid #f3b27a;box-shadow:0 12px 24px rgba(100,50,0,.1)}.dropdown-cal-menu li{color:#4b2e1f;font-family:Georgia,serif;margin:0}.dropdown-cal-menu a{color:inherit;display:block;padding:.75em 1.25em;text-decoration:none}.dropdown-cal-menu a:hover{background-color:#fce3c5;text-decoration:underline;text-decoration-thickness:.05em;text-underline-offset:.15em}",smoke:".btn-cal-dropdown{align-items:center;border-radius:6px;cursor:pointer;display:inline-flex;font-family:Poppins,Helvetica,sans-serif;font-size:14px;font-weight:600;margin:2px;padding:10px 16px;position:relative;transition:background .3s ease,transform .2s ease}.btn-cal-dropdown:active{transform:scale(.98)}.btn-arrow{border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #f5f5f5;height:0;margin-left:10px;transition:transform .3s ease;width:0}.btn-cal-dropdown[aria-expanded=true] .btn-arrow{transform:rotate(180deg)}.dropdown-cal-menu{border-radius:8px;display:block;list-style:none;min-width:200px;opacity:0;padding:5px 0;pointer-events:none;position:absolute;transform:scale(.95) translateY(-10px);transform-origin:top;transition:all .25s ease;z-index:1000}.dropdown-cal-menu.show{opacity:1;pointer-events:auto;transform:scale(1) translateY(0)}.dropdown-cal-menu li{font-family:Arial,sans-serif;font-size:13px;transition:background-color .15s ease}.dropdown-cal-menu a{padding:10px 16px;transition:background-color .15s ease,color .2s ease}.dropdown-cal-menu li:first-child{border-radius:8px 8px 0 0}.dropdown-cal-menu li:last-child{border-radius:0 0 8px 8px}.btn-cal-dropdown{backdrop-filter:blur(.5em);background-color:rgba(40,40,40,.8);border:.0625em solid hsla(0,0%,100%,.08);color:#eee;font-family:Inter,sans-serif}.btn-cal-dropdown:hover{background-color:rgba(60,60,60,.85);box-shadow:0 0 .5em hsla(0,0%,100%,.08)}.dropdown-cal-menu{backdrop-filter:blur(.75em);background-color:hsla(0,0%,8%,.95);border:.0625em solid hsla(0,0%,100%,.08);border-radius:.75em;box-shadow:0 1em 2em rgba(0,0,0,.6);color:#eee}.dropdown-cal-menu li{color:#ddd;font-family:Inter,sans-serif;font-size:.9375em;margin:0;padding:0}.dropdown-cal-menu a{border-radius:.5em;color:#ccc;display:block;padding:.75em 1.25em;text-decoration:none;transition:background .2s ease,box-shadow .2s ease}.dropdown-cal-menu a:hover{background-color:rgba(80,80,80,.4);box-shadow:0 0 .5em hsla(0,0%,100%,.05);text-decoration:none}",neon:".btn-cal-dropdown{align-items:center;border-radius:6px;cursor:pointer;display:inline-flex;font-family:Poppins,Helvetica,sans-serif;font-size:14px;font-weight:600;margin:2px;padding:10px 16px;position:relative;transition:background .3s ease,transform .2s ease}.btn-cal-dropdown:active{transform:scale(.98)}.btn-arrow{border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #f5f5f5;height:0;margin-left:10px;transition:transform .3s ease;width:0}.btn-cal-dropdown[aria-expanded=true] .btn-arrow{transform:rotate(180deg)}.dropdown-cal-menu{border-radius:8px;display:block;list-style:none;min-width:200px;opacity:0;padding:5px 0;pointer-events:none;position:absolute;transform:scale(.95) translateY(-10px);transform-origin:top;transition:all .25s ease;z-index:1000}.dropdown-cal-menu.show{opacity:1;pointer-events:auto;transform:scale(1) translateY(0)}.dropdown-cal-menu li{font-family:Arial,sans-serif;font-size:13px;transition:background-color .15s ease}.dropdown-cal-menu a{padding:10px 16px;transition:background-color .15s ease,color .2s ease}.dropdown-cal-menu li:first-child{border-radius:8px 8px 0 0}.dropdown-cal-menu li:last-child{border-radius:0 0 8px 8px}.btn-cal-dropdown{background-color:#6366f1;border:none;color:#fff;font-family:Inter,sans-serif}.btn-cal-dropdown:hover{background-color:#818cf8;box-shadow:0 0 .5em #c4b5fd;opacity:1}.dropdown-cal-menu{background:#fff;border:.0625em solid #c7d2fe;border-radius:.75em;box-shadow:0 .75em 2em rgba(99,102,241,.25)}.dropdown-cal-menu li{color:#1e1b4b;font-family:Inter,sans-serif;font-size:.9375em;margin:0;padding:0}.dropdown-cal-menu a{border-radius:.5em;color:inherit;display:block;padding:.75em 1.25em;text-decoration:none;transition:background .2s ease,box-shadow .2s ease}.dropdown-cal-menu a:hover{background-color:#eef2ff;box-shadow:0 0 .5em #c7d2fe;text-decoration:none}",soft:".btn-cal-dropdown{align-items:center;border-radius:6px;cursor:pointer;display:inline-flex;font-family:Poppins,Helvetica,sans-serif;font-size:14px;font-weight:600;margin:2px;padding:10px 16px;position:relative;transition:background .3s ease,transform .2s ease}.btn-cal-dropdown:active{transform:scale(.98)}.btn-arrow{border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #f5f5f5;height:0;margin-left:10px;transition:transform .3s ease;width:0}.btn-cal-dropdown[aria-expanded=true] .btn-arrow{transform:rotate(180deg)}.dropdown-cal-menu{border-radius:8px;display:block;list-style:none;min-width:200px;opacity:0;padding:5px 0;pointer-events:none;position:absolute;transform:scale(.95) translateY(-10px);transform-origin:top;transition:all .25s ease;z-index:1000}.dropdown-cal-menu.show{opacity:1;pointer-events:auto;transform:scale(1) translateY(0)}.dropdown-cal-menu li{font-family:Arial,sans-serif;font-size:13px;transition:background-color .15s ease}.dropdown-cal-menu a{padding:10px 16px;transition:background-color .15s ease,color .2s ease}.dropdown-cal-menu li:first-child{border-radius:8px 8px 0 0}.dropdown-cal-menu li:last-child{border-radius:0 0 8px 8px}.btn-cal-dropdown{background-color:#fff;border:.0625em solid #ddd;color:#333}.btn-cal-dropdown:hover{background-color:#f0f0f0}.dropdown-cal-menu{background-color:#fff;border:.0625em solid #ddd;border-radius:.5em;box-shadow:0 .5em 1em rgba(0,0,0,.05);color:#222}.dropdown-cal-menu li{color:#222;font-family:Inter,sans-serif;font-size:1em;margin:0;padding:0}.dropdown-cal-menu a{color:inherit;display:block;padding:.75em 1.25em;text-decoration:none;transition:background .2s ease}.dropdown-cal-menu a:hover{background-color:#f5f5f5}.btn-arrow{border-top:6px solid #6f6f6f}"};if(e&&t&&n?.[t]){const e=document.createElement("style");e.textContent=n[t],this.shadowRoot.appendChild(e),o=!0}}catch(t){}if(!o){const t=document.createElement("style");t.textContent=".btn-cal-dropdown{align-items:center;border-radius:6px;cursor:pointer;display:inline-flex;font-family:Poppins,Helvetica,sans-serif;font-size:14px;font-weight:600;margin:2px;padding:10px 16px;position:relative;transition:background .3s ease,transform .2s ease}.btn-cal-dropdown:active{transform:scale(.98)}.btn-arrow{border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #f5f5f5;height:0;margin-left:10px;transition:transform .3s ease;width:0}.btn-cal-dropdown[aria-expanded=true] .btn-arrow{transform:rotate(180deg)}.dropdown-cal-menu{border-radius:8px;display:block;list-style:none;min-width:200px;opacity:0;padding:5px 0;pointer-events:none;position:absolute;transform:scale(.95) translateY(-10px);transform-origin:top;transition:all .25s ease;z-index:1000}.dropdown-cal-menu.show{opacity:1;pointer-events:auto;transform:scale(1) translateY(0)}.dropdown-cal-menu li{font-family:Arial,sans-serif;font-size:13px;margin:0;padding:0;transition:background-color .15s ease}.dropdown-cal-menu a{display:block;padding:10px 16px;text-decoration:none;transition:background-color .15s ease,color .2s ease}.dropdown-cal-menu li:first-child{border-radius:8px 8px 0 0}.dropdown-cal-menu li:last-child{border-radius:0 0 8px 8px}.btn-cal-dropdown{background:#1c1c1f;border:1px solid #6e6cfb;color:#f5f5f5}.btn-cal-dropdown:hover{background:#6e6cfb;color:#fff}.dropdown-cal-menu{background-color:#1c1c1f;border:1px solid #2e2e32;box-shadow:0 12px 24px rgba(0,0,0,.5)}.dropdown-cal-menu a{color:#c3c7ff}.dropdown-cal-menu li:hover{background-color:#2c2e36}",this.shadowRoot.appendChild(t)}if(this.themeUrl){const t=document.createElement("link");t.rel="stylesheet",t.href=this.themeUrl,this.shadowRoot.appendChild(t)}const n=document.createElement("div");n.className="container",n.style="display: inline-block; position: relative",this.__button=document.createElement("button"),this.__button.innerHTML=`${this.button} <span class="btn-arrow"></span>`,this.__button.className="btn-cal-dropdown",this.__button.setAttribute("aria-haspopup","true"),this.__button.setAttribute("aria-expanded","false"),this.__button.setAttribute("role","button");const r=document.createElement("ul");r.className="dropdown-cal-menu",r.setAttribute("role","menu"),this.google=document.createElement("li"),this.google.setAttribute("role","menuitem"),this.google.innerHTML=`<a href="${this.genGoogleLink()}" target="_blank" rel="noopener">Google Calendar</a>`,this.outlook=document.createElement("li"),this.outlook.setAttribute("role","menuitem"),this.outlook.innerHTML=`<a href="${this.genOutlookLink()}" target="_blank" rel="noopener">Outlook Calendar</a>`,this.yahoo=document.createElement("li"),this.yahoo.setAttribute("role","menuitem"),this.yahoo.innerHTML=`<a href="${this.genYahooLink()}" target="_blank" rel="noopener">Yahoo Calendar</a>`,this.ics=document.createElement("li"),this.ics.setAttribute("role","menuitem"),this.ics.innerHTML=`<a href="${this.genICSBlobLink()}" download="event.ics">Apple / ICS File</a>`,n.appendChild(this.__button),n.appendChild(r),r.appendChild(this.google),r.appendChild(this.outlook),r.appendChild(this.yahoo),r.appendChild(this.ics),this.shadowRoot.appendChild(n);const a=t=>{t.classList.toggle("show"),this.__button.setAttribute("aria-expanded",t.classList.contains("show")),this.__opened=t.classList.contains("show")?t:null};this.__button.addEventListener("keydown",t=>{if("Enter"===t.key||" "===t.key){t.preventDefault();const e=this.__button.nextElementSibling;a(e)}}),document.addEventListener("click",t=>{const e=t.composedPath().includes(this.__button),o=this.__button.nextElementSibling;e?a(o):this.__opened&&(this.__opened.classList.remove("show"),this.__button.setAttribute("aria-expanded","false"),this.__opened=null)})}disconnectedCallback(){this.__currentBlobUrl&&(URL.revokeObjectURL(this.__currentBlobUrl),this.__currentBlobUrl=null)}attributeChangedCallback(t,e,o){this.__button&&("button"===t?this.__button.innerHTML=`${o} <span class="btn-arrow"></span>`:["title","date-start","date-end","timezone","location","organizer","content"].includes(t)&&this.updateCalendarLinks())}}function e(){customElements.get("calendarizer")||customElements.define("calendarizer",t)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()});
